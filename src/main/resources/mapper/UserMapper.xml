<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kb.csrm.user.mapper.UserMapper">
    <resultMap id="BaseResultMap" type="com.kb.csrm.user.dto.UserDto">
        <result column="user_id" property="userId" jdbcType="INTEGER"/>
        <result column="user_name" property="userName" jdbcType="VARCHAR"/>
        <result column="account" property="account" jdbcType="INTEGER"/>
        <result column="password" property="password" jdbcType="VARCHAR"/>
        <result column="role_name" property="roleName" jdbcType="VARCHAR"/>
        <result column="mail" property="mail" jdbcType="VARCHAR"/>
        <result column="college_id" property="collegeId" jdbcType="INTEGER"/>
        <result column="age" property="age" jdbcType="INTEGER"/>
        <result column="education" property="education" jdbcType="VARCHAR"/>
        <result column="pw_question" property="pwQuestion" jdbcType="VARCHAR"/>
        <result column="pw_answer" property="pwAnswer" jdbcType="VARCHAR"/>
    </resultMap>

    <insert id="insertUser" parameterType="com.kb.csrm.user.dto.UserDto">
        insert into user(
        account,
        user_name,
        role_name,
        pawword,
        mail
        )values (
        #{account},
        #{userName},
        #{roleName},
        #{password},
        #{mail}
        )
    </insert>

    <select id="selectUserById" resultMap="BaseResultMap">
        SELECT
        user_id,
        user_name,
        account,
        password,
        role_name,
        mail,
        college_id,
        age,
        education,
        pw_question,
        pw_answer
        FROM user
        WHERE user_id = #{userId}
    </select>

    <select id="query" resultMap="BaseResultMap">
        SELECT
        user_id,
        user_name,
        account,
        password,
        role_name,
        mail,
        college_id,
        age,
        education,
        pw_question,
        pw_answer
        FROM user
    </select>

    <select id="deleteUserById" parameterType="com.kb.csrm.user.dto.UserDto">
        delete
        from user
        where user_id = #{userId}
    </select>
    <select id="updateUserById" parameterType="com.kb.csrm.user.dto.UserDto">
        update user
        set user_id=#{userId},
        user_name=#{userName},
        role_name=#{roleName},
        mail=#{mail}
        where user_id = #{userId}
    </select>

    <select id="login" parameterType="INT" resultMap="BaseResultMap">
        SELECT
        user_id,
        user_name,
        account,
        password,
        role_name,
        mail,
        college_id,
        age,
        education,
        pw_question,
        pw_answer
        FROM user
        WHERE account = #{account}
    </select>

    <select id="signup" parameterType="com.kb.csrm.user.dto.UserDto">
        insert into user(
        user_name,
        account,
        password,
        role_name,
        mail
        )values (
        #{userName},
        #{account},
        #{password},
        #{roleName},
        #{mail}
        )
    </select>
</mapper>