<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="http://libs.useso.com/js/html5shiv/3.7/html5shiv.min.js"></script>
    <script type="text/javascript" src="http://libs.useso.com/js/respond.js/1.4.2/respond.min.js"></script>
    <script type="text/javascript" src="http://cdn.bootcss.com/css3pie/2.0beta1/PIE_IE678.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="css/H-ui.css"/>
    <link type="text/css" rel="stylesheet" href="css/H-ui.admin.css"/>
    <link type="text/css" rel="stylesheet" href="font/font-awesome.min.css"/>
    <!--[if IE 7]>
    <link href="http://www.bootcss.com/p/font-awesome/assets/css/font-awesome-ie7.min.css" rel="stylesheet" type="text/css" />
    <![endif]-->
    <title>功能编辑</title>
</head>
<body>
<div class="pd-20">
    <div class="Huiform">
        <table class="table table-bg">
            <tbody>
            <tr>
                <th class="text-r">功能名称：</th>
                <td><input type="text" style="width:300px" class="input-text" value="" placeholder="" id="functionName"
                           name="functionName"></td>
            </tr>
            <tr>
                <th class="text-r">功能描述：</th>
                <td><input type="text" style="width:300px" class="input-text" value="" placeholder=""
                           id="functionMeaning" name="functionMeaning"></td>
            </tr>
            <tr>
                <th class="text-r">功能URL：</th>
                <td><input type="text" style="width:300px" class="input-text" value="" placeholder="" id="functionUrl"
                           name="functionUrl"></td>
            </tr>
            <tr>
                <th class="text-r">父级功能ID：</th>
                <td><input type="text" style="width:300px" class="input-text" value="" placeholder="" id="parentId"
                           name="parentId"></td>
            </tr>
            <tr>
                <th></th>
                <td>
                    <button class="btn btn-success radius" id="updateFunction" type="submit"><i class="icon-ok"></i> 确定</button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
<script type="text/javascript" src="http://cdn.bootcss.com/jquery/2.1.3/jquery.min.js"></script>
<script type="text/javascript" src="js/Validform_v5.3.2_min.js"></script>
<script type="text/javascript" src="js/H-ui.js"></script>
<script type="text/javascript" src="js/H-ui.admin.js"></script>

<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="static/h-ui/js/H-ui.min.js"></script>
<script type="text/javascript" src="static/h-ui.admin/js/H-ui.admin.js"></script> <!--/_footer 作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="lib/jquery.validation/1.14.0/jquery.validate.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="lib/jquery.validation/1.14.0/messages_zh.js"></script>
<script type="text/javascript">
    $(".Huiform").Validform();
</script>
<script type="text/javascript">
    $(function(){
        /* 用途: 接收地直栏参数 取id=1 根据ID的值 */
        var urlinfo=window.location.href; //获取当前页面的url
        var len=urlinfo.length;//获取url的长度
        var offset=urlinfo.indexOf("?");//设置参数字符串开始的位置
        var newsidinfo=urlinfo.substr(offset,len)//取出参数字符串 这里会获得类似“id=1”这样的字符串
        var newsids=newsidinfo.split("=");//对获得的参数字符串按照“=”进行分割
        var newsid=newsids[1];//得到参数值
        var newsname=newsids[0];//得到参数名字
        $("#updateFunction").click(function () {
            var functionId = newsid;
            var functionName = $("#functionName").val();
            var functionMeaning = $("#functionMeaning").val();
            var functionUrl = $("#functionUrl").val();
            var parentId = $("#parentId").val();
            $.ajax({
                type: "POST",
                url: "function/updateFunction",//请求程序页面
                dataType: "json",
                async: false,//当有返回值以后才会进行后面的js程序。
                data: {
                    "functionId": functionId,
                    "functionName": functionName,
                    "functionMeaning": functionMeaning,
                    "functionUrl": functionUrl,
                    "parentId": parentId
                },//请求需要发送的处理数据
                success: function (data) {
                    if(data){
                        alert("修改成功！");
                        window.close();
                    }
                    else {
                        alert("修改失败！");
                    }

                }

            });
        });
    });
</script>
</body>
</html>